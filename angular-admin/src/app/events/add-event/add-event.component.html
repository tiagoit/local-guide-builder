<form class="form-container" [formGroup]="fg"> 
  <!-- TITLE -->
  <mat-form-field>
    <input #firstInput matInput formControlName="title" placeholder="Título" required>
  </mat-form-field>

  <!-- ORG -->
  <mat-form-field>
    <mat-select required formControlName="org_code">
      <mat-option *ngFor="let org of orgs" [value]="org.code">{{org.name}}</mat-option>
    </mat-select>
    <mat-label>Organização</mat-label>
  </mat-form-field>

  <!-- IMG -->
  <mat-form-field>
    <input matInput formControlName="img" placeholder="Imagem" required>
  </mat-form-field>

  <!-- START -->
  <div class="start">
    <!-- TODO: Disable input -->
    <mat-form-field class="date">
      <input matInput formControlName="start" [matDatepicker]="startPicker" placeholder="Data">
      <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
      <mat-datepicker #startPicker></mat-datepicker>
    </mat-form-field>
    <mat-form-field class="time">
      <mat-select required formControlName="startTime">
        <mat-option *ngFor="let t of timeOptions" [value]="t">{{t}}h</mat-option>
      </mat-select>
      <mat-label>Horário</mat-label>
    </mat-form-field>
  </div>

  <!-- END -->
  <!-- <mat-form-field>
    <input matInput formControlName="end" [matDatepicker]="endPicker" placeholder="Término">
    <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
    <mat-datepicker #endPicker></mat-datepicker>
  </mat-form-field> -->

  <mat-checkbox formControlName="featured">Destaque</mat-checkbox>

  <div class="row images">
    <div class="image-col col-12 col-sm-6 col-md-4 col-lg-3">
      <div class="img-wrapper"><img [src]="imgPreview[0]" *ngIf="imgPreview[0]"></div>
      <input #file0 type="file" accept='image/*' (change)="preview(file0.files, 0)" />
      <button mat-raised-button color="primary" (click)="file0.click()">Imagem 1</button>
    </div>

    <div class="image-col col-12 col-sm-6 col-md-4 col-lg-3">
      <div class="img-wrapper"><img [src]="imgPreview[1]" *ngIf="imgPreview[1]"></div>
      <input #file1 type="file" accept='image/*' (change)="preview(file1.files, 1)" />
      <button mat-raised-button color="primary" (click)="file1.click()">Imagem 2</button>
    </div>

    <div class="image-col col-12 col-sm-6 col-md-4 col-lg-3">
      <div class="img-wrapper"><img [src]="imgPreview[2]" *ngIf="imgPreview[2]"></div>
      <input #file2 type="file" accept='image/*' (change)="preview(file2.files, 2)" />
      <button mat-raised-button color="primary" (click)="file2.click()">Imagem 3</button>
    </div>
  
    <div class="image-col col-12 col-sm-6 col-md-4 col-lg-3">
      <div class="img-wrapper"><img [src]="imgPreview[3]" *ngIf="imgPreview[3]"></div>
      <input #file3 type="file" accept='image/*' (change)="preview(file3.files, 3)" />
      <button mat-raised-button color="primary" (click)="file3.click()">Imagem 4</button>
    </div>
  </div>

  <button mat-raised-button color="accent" [disabled]="!fg.valid" (click)="save()">Salvar</button>



  <!-- File input for the file-upload plugin, with special ng2-file-upload directive called ng2FileSelect -->
  <input type="file" name="photo" ng2FileSelect [uploader]="uploader" />
  <!-- button to trigger the file upload when submitted -->
  <button type="button" class="btn btn-success btn-s"
        (click)="uploader.uploadAll()" 
        [disabled]="!uploader.getNotUploadedItems().length">
        Upload with ng-2 file uploader
  </button>

</form>
